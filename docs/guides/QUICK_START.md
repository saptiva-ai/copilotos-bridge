# 🚀 Quick Start Guide

**Get Copilotos Bridge running in 5 minutes!**

## ⚡ Super Quick Start (TL;DR)

```bash
# 1. Clone & enter directory
git clone <repo-url> && cd copilotos-bridge

# 2. One-command setup
make setup

# 3. Start services  
make dev

# 4. Create demo user
make create-user

# 5. Open browser
open http://localhost:3000
```

**Login with:** `demo` / `Demo123!`

---

## 📋 Step-by-Step Guide

### 1️⃣ Prerequisites

- **Docker** & **Docker Compose** installed
- **Git** installed
- **Make** installed (usually pre-installed on Linux/macOS)

**Check prerequisites:**
```bash
docker --version        # Should show 20.10+
docker compose version  # Should show v2.x
make --version          # Should show GNU Make
```

### 2️⃣ Clone Repository

```bash
git clone https://github.com/saptiva-ai/copilotos-bridge
cd copilotos-bridge
```

### 3️⃣ First-Time Setup

```bash
make setup
```

This command will:
- ✅ Create environment files (`envs/.env`)
- ✅ Create Python virtual environment (`.venv/`)
- ✅ Install dependencies
- ✅ Prepare the project for development

**Important:** Edit `envs/.env` if you have custom API keys.

### 4️⃣ Start Development Services

```bash
make dev
```

This will start:
- 🌐 **Web (Next.js)**: http://localhost:3000
- ⚡ **API (FastAPI)**: http://localhost:8001
- 📚 **API Docs**: http://localhost:8001/docs
- 🗄️ **MongoDB**: localhost:27017
- 💾 **Redis**: localhost:6379

**Wait for services to be healthy** (30-60 seconds on first run)

### 5️⃣ Create Demo User

```bash
make create-user
```

**Default credentials created:**
- Username: `demo`
- Password: `Demo123!`
- Email: `demo@example.com`

### 6️⃣ Access the Application

Open your browser:
```
http://localhost:3000
```

Login with: **demo** / **Demo123!**

---

## 🎯 Common Commands

### Development Workflow

```bash
# Start services
make dev

# View logs (all services)
make logs

# View logs (specific service)
make logs-api
make logs-web

# Stop services
make stop

# Restart services
make restart

# Check service health
make health
```

### User Management

```bash
# Create demo user
make create-user

# List all users
make list-users

# Test login
make login-test

# Get JWT token for API testing
make get-token
```

### Container Access

```bash
# Access API container shell
make shell-api

# Access web container shell
make shell-web

# Access MongoDB shell
make shell-db

# Access Redis CLI
make shell-redis
```

### Testing & Quality

```bash
# Run all tests
make test

# Run API tests only
make test-api

# Run E2E tests
make test-e2e

# Check code quality
make lint

# Auto-fix linting issues
make lint-fix

# Full verification
make verify
```

### Cleanup

```bash
# Stop and remove containers
make clean

# Clean including data volumes (⚠️ DATA LOSS)
make clean-volumes

# Deep clean (remove all Docker resources)
make clean-all
```

---

## 🔐 Credentials Reference

### Demo User (Default)
```
Username: demo
Password: Demo123!
Email:    demo@example.com
```

### Database Credentials (Default)
```
MongoDB:
  Host:     localhost:27017
  User:     copilotos_user
  Password: secure_password_change_me
  Database: copilotos

Redis:
  Host:     localhost:6379
  Password: redis_password_change_me
```

### API Keys (Required)
```
SAPTIVA_API_KEY=<your-key-here>
JWT_SECRET_KEY=<auto-generated-or-custom>
```

**Note:** Update these in `envs/.env` for production use.

---

## 🆘 Troubleshooting

### Services won't start
```bash
# Check Docker is running
docker ps

# View service logs
make logs

# Try rebuilding
make stop
make dev-build
```

### Can't login
```bash
# Verify API is healthy
make health

# Recreate demo user
make create-user

# Test login manually
make login-test
```

### Port conflicts
```bash
# Check what's using ports
sudo lsof -i :3000
sudo lsof -i :8001

# Or change ports in envs/.env
WEB_PORT=3001
API_PORT=8002
```

### Permission issues
```bash
# Fix Docker permissions
bash scripts/fix-docker-permissions.sh

# Then rebuild
make clean
make dev-build
```

### Reset everything
```bash
# Nuclear option (⚠️ deletes all data)
make stop
make clean-all
make setup
make dev
make create-user
```

---

## 📚 Next Steps

1. **Read the full README**: `cat README.md`
2. **Explore API docs**: http://localhost:8001/docs
3. **Check deployment guide**: `docs/DEPLOYMENT.md`
4. **Review security guide**: `docs/SECURITY.md`
5. **View all commands**: `make help`

---

## 💡 Pro Tips

### Hot Reload
Code changes are automatically detected:
- **Frontend**: Changes in `apps/web/src` reload instantly
- **Backend**: FastAPI auto-reloads on Python file changes

### Debug Mode
```bash
# View detailed logs
make logs-api

# Access container shell for debugging
make shell-api

# Check environment variables
docker exec copilotos-api env | grep -i saptiva
```

### Custom Configuration
```bash
# Edit environment file
nano envs/.env

# Restart to apply changes
make restart
```

### Testing API with curl
```bash
# Get authentication token
export TOKEN=$(make get-token 2>&1 | grep export | cut -d'"' -f2)

# Test authenticated endpoint
curl -H "Authorization: Bearer $TOKEN" \
  http://localhost:8001/api/chat \
  -H "Content-Type: application/json" \
  -d '{"message":"Hello!","session_id":"test"}'
```

---

## 🎉 You're Ready!

You now have:
- ✅ Copilotos Bridge running locally
- ✅ Demo user account ready
- ✅ All development tools configured
- ✅ Hot reload enabled

**Happy coding! 🚀**

Need help? Run `make help` or check `README.md`
