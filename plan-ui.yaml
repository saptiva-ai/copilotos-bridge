sprint_name: "Saptiva Chat – Convergencia UX tipo ChatGPT"
sprint_goal: "Reducir fricción cognitiva y hacer el chat tan utilizable como ChatGPT: selector de modelo compacto, historial colapsable, tools desde el composer y adjuntos integrados."
principles:
  - "Hick's Law: minimizar opciones visibles; ofrecer búsqueda y jerarquía."
  - "Fitts's Law: ubicar controles frecuentes arriba-izquierda y cerca del input."
  - "Progresive disclosure: configuración contextual, no pantallas nuevas."
  - "Estoicismo aplicado: foco en lo controlable; eliminar modos confusos."
design_tokens:
  spacing: [4, 8, 12, 16, 24]
  radius: [8, 12, 16]
  elevation: [sm, md]
  typography:
    ui: "IBM Plex Sans"
    code: "IBM Plex Mono"
  sidebar_width:
    expanded: 280
    collapsed: 72
features:
  - id: UX-001
    title: "Selector de modelo compacto (pill + popover jerárquico)"
    rationale: "Reducir espacio y acelerar selección; alineado a ChatGPT."
    spec:
      placement: "header-left, encima del historial"
      pill_label: "Provider/Model (context) ▾"
      popover:
        search: true
        hierarchy: ["provider", "family", "variant"]
        quick_presets: ["Rápido", "Preciso", "Creativo"]
      state_persistence: "remember last model per workspace"
    acceptance_criteria:
      - "La pill muestra proveedor, modelo y ventana de contexto."
      - "Buscar por texto filtra en tiempo real."
      - "Seleccionar variante cierra popover y actualiza la pill."
      - "⌘/Ctrl+K enfoca búsqueda del popover si está abierto."
    estimate: "5pd"
    owner: "frontend"
    labels: ["priority:p0", "ux", "accessibility"]
  - id: UX-002
    title: "Historial colapsable con acciones en hover"
    rationale: "Limpieza visual y control; patrón idéntico al de ChatGPT."
    spec:
      collapse_shortcut: "Cmd/Ctrl+B"
      list: "virtualized"
      item_hover_actions: ["rename", "pin", "delete"]
      empty_state: "Nueva conversación"
    acceptance_criteria:
      - "Colapsa/expande con botón y atajo."
      - "Acciones aparecen solo al hover y funcionan."
      - "Rendimiento > 60FPS al scroll con 1k items (virtualizado)."
    estimate: "4pd"
    owner: "frontend"
    labels: ["priority:p1", "performance"]
  - id: UX-003
    title: "Tools como acciones del composer (botón '+')"
    rationale: "Evitar modos; invocar herramientas por turno."
    spec:
      composer_button: "+"
      action_menu:
        items:
          - "Add files"
          - "Add from Google Drive"
          - "Deep research"
          - "Code analysis"
          - "Document analysis"
          - "Use connectors"
          - "More…"
        submenu_behavior: "hover-or-click open; close-on-select"
    acceptance_criteria:
      - "Abrir menú con click o Alt+N."
      - "Seleccionar una tool abre sheet/popover breve con configuración."
      - "La tool no queda 'activada' globalmente; aplica al mensaje."
    estimate: "4pd"
    owner: "frontend"
    labels: ["priority:p0"]
  - id: UX-004
    title: "Adjuntar archivos integrado"
    rationale: "Paridad con ChatGPT y flujo de trabajo real."
    spec:
      drag_and_drop: "composer area"
      accepted_types: ["pdf","png","jpg","docx","txt","md","csv","json",".ipynb"]
      attachment_chips: true
      progress_bar: true
      limits:
        size_mb: 20
        count: 5
    acceptance_criteria:
      - "Drag&drop muestra preview y chip con tamaño."
      - "Eliminar adjunto desde chip funciona."
      - "Errores claros al exceder límites."
    estimate: "3pd"
    owner: "frontend"
    labels: ["priority:p0","files"]
  - id: UX-005
    title: "Estados de mensaje (streaming/stop/regenerate/copy)"
    rationale: "Claridad operativa; evita incertidumbre."
    spec:
      streaming_cursor: true
      actions: ["Stop","Regenerate","Copy"]
      token_latency_footer: true
    acceptance_criteria:
      - "Stop interrumpe stream sin colgar UI."
      - "Regenerate re-envía con mismo prompt y adjuntos."
      - "Footer muestra 'tokens · latencia · modelo'."
    estimate: "2pd"
    owner: "frontend"
    labels: ["priority:p1"]
  - id: UX-006
    title: "Accesibilidad y atajos"
    rationale: "Rapidez y AA contrast."
    spec:
      a11y: ["focus-visible","aria-roles","contrast-AA"]
      shortcuts:
        collapse_history: "Cmd/Ctrl+B"
        send: "Cmd/Ctrl+Enter"
        stop: "Esc"
        open_actions: "Alt+N"
        command_palette: "Cmd/Ctrl+K"
    acceptance_criteria:
      - "Todos los controles son navegables con teclado."
      - "Atajos funcionan y están documentados en '⌘' help."
    estimate: "2pd"
    owner: "frontend"
    labels: ["priority:p1","a11y"]
non_functional:
  perf:
    target_fcp_ms: 1200
    list_scroll_fps: 60
  testing:
    e2e: ["selector-modelo","subida-archivos","tools-por-turno"]
    visual_regression: true
rollout:
  flags: ["new-model-switch","composer-actions","attachments-v1"]
  telemetry:
    events: ["open_model_popover","select_model","collapse_history","add_attachment","use_tool"]
    dashboard: "UX adoption and time-to-first-reply"
definition_of_done:
  - "Paridad visual razonable con ChatGPT en desktop (≥1280px)."
  - "Sin regresiones de rendimiento ni focus-traps."
  - "Docs breves en README-UX con gifs de interacción."

