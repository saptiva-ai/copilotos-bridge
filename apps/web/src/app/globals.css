/* SAPTIVA Lab Typography - IBM Plex Sans */
@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* SAPTIVA Design Tokens */
@import '../styles/tokens.css';

@layer base {
  /* Global height and overflow fixes */
  html, body, #__next {
    height: 100%;
  }

  body {
    overflow-x: hidden;
  }

  /* Dynamic viewport height support */
  @supports (height: 100dvh) {
    .h-screen {
      height: 100dvh;
    }
  }

  /* Smooth scroll for iOS Safari */
  #message-list {
    -webkit-overflow-scrolling: touch;
  }

  /* Fuente única global del Lab */
  html {
    font-family: 'IBM Plex Sans', system-ui, sans-serif;
    font-weight: 400; /* Weight normal por defecto */
  }

  /* ========================================
   * Minimal Scrollbars (ChatGPT-style)
   * ======================================== */

  /* Firefox scrollbar styling */
  * {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.18) transparent;
  }

  /* WebKit scrollbar styling (Chrome, Safari, Edge) */
  *::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  *::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.18);
    border-radius: 9999px;
  }

  /* Subtle highlight on hover */
  *:hover::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.28);
  }

  /* Extra subtle for textareas */
  textarea::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.12);
  }

  textarea:hover::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.28);
  }

  /* Composer height variable for layout shift prevention */
  :root {
    --composer-h: 88px;
  }

  /* ========================================
   * Minimalist Surface Tokens (ChatGPT-style)
   * ======================================== */
  :root {
    --surface: rgba(255, 255, 255, 0.04);
    --surface-strong: rgba(255, 255, 255, 0.06);
    --hairline: rgba(255, 255, 255, 0.08);
  }

  /* Escala tipográfica del Lab aplicada globalmente */
  .text-lab-xs { @apply text-xs font-normal; }
  .text-lab-sm { @apply text-sm font-normal; }
  .text-lab-base { @apply text-base font-normal; }
  .text-lab-lg { @apply text-lg font-normal; }
  .text-lab-xl { @apply text-xl font-normal; }
  .text-lab-2xl { @apply text-2xl font-normal; }
  .text-lab-3xl { @apply text-3xl font-normal; }
  .text-lab-4xl { @apply text-4xl font-normal; }

  /* Variantes bold (700) */
  .text-lab-xs-bold { @apply text-xs font-bold; }
  .text-lab-sm-bold { @apply text-sm font-bold; }
  .text-lab-base-bold { @apply text-base font-bold; }
  .text-lab-lg-bold { @apply text-lg font-bold; }
  .text-lab-xl-bold { @apply text-xl font-bold; }
  .text-lab-2xl-bold { @apply text-2xl font-bold; }
  .text-lab-3xl-bold { @apply text-3xl font-bold; }
  .text-lab-4xl-bold { @apply text-4xl font-bold; }
}

@layer utilities {
  .safe-area-top {
    padding-top: 0px;
    padding-top: constant(safe-area-inset-top);
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: 0px;
    padding-bottom: constant(safe-area-inset-bottom);
    padding-bottom: env(safe-area-inset-bottom);
  }

  /* Utility class for thin scrollbars */
  .thin-scroll {
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.18) transparent;
  }

  .thin-scroll::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .thin-scroll::-webkit-scrollbar-track {
    background: transparent;
  }

  .thin-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.18);
    border-radius: 9999px;
  }

  .thin-scroll:hover::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.28);
  }

  /* Main layout helper: reserve space for sticky composer */
  .main-has-composer {
    padding-bottom: var(--composer-h);
  }

  /* ========================================
   * Minimalist Hairline Utilities
   * ======================================== */
  .hairline {
    box-shadow: inset 0 0 0 0.5px var(--hairline);
  }

  .hairline-none {
    box-shadow: none;
  }

  /* No visible focus ring - accessibility via subtle shadow */
  .focus-minimal {
    @apply outline-none ring-0;
  }

  .focus-minimal:focus,
  .focus-minimal:focus-visible {
    @apply outline-none ring-0;
    box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.08);
  }
}
