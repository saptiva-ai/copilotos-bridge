# ========================================
# MAIN APPLICATION CONFIGURATION
# ========================================
NODE_ENV=development
API_BASE_URL=http://localhost:8000

# ========================================
# AUTHENTICATION / SECURITY
# ========================================
JWT_SECRET_KEY=change-me-to-secure-random-string-in-production
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ALGORITHM=HS256
SECRET_KEY=another-secret-for-session-signing

# ========================================
# ALETHEIA ORCHESTRATOR
# ========================================
ALETHEIA_BASE_URL=http://localhost:8000
ALETHEIA_API_KEY=optional-if-required
ALETHEIA_TIMEOUT_SECONDS=120
ALETHEIA_MAX_RETRIES=3
ALETHEIA_RETRY_DELAY_MS=1000

# ========================================
# SAPTIVA API CONFIGURATION (ENV-ONLY)
# ========================================
# Required: SAPTIVA API Key for production mode
# If not set, application runs in demo mode with limited functionality
SAPTIVA_API_KEY=your-saptiva-api-key-here

# SAPTIVA API Configuration
SAPTIVA_BASE_URL=https://api.saptiva.com
NEXT_PUBLIC_SAPTIVA_BASE_URL=https://api.saptiva.com
SAPTIVA_TIMEOUT=30
SAPTIVA_MAX_RETRIES=3

# Hardening Post-MVP: LLM timeout protection (BE-PERF-2)
# Maximum time to wait for LLM response before timing out gracefully
LLM_TIMEOUT_SECONDS=30

# ========================================
# STREAMING AND PERFORMANCE
# ========================================
STREAM_BACKPRESSURE_MAX=1000
STREAM_HEARTBEAT_INTERVAL_MS=5000
SSE_KEEP_ALIVE_TIMEOUT_MS=30000
STREAM_BUFFER_SIZE=1024

# ========================================
# DATABASE (MongoDB)
# ========================================
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_USER=copilotos_user
MONGODB_PASSWORD=secure_password_change_me
MONGODB_DB=copilotos
MONGODB_URL=mongodb://${MONGODB_USER}:${MONGODB_PASSWORD}@${MONGODB_HOST}:${MONGODB_PORT}/${MONGODB_DB}

# MongoDB Atlas (alternative cloud option)
# MONGODB_URL=mongodb+srv://username:password@cluster.mongodb.net/copilotos?retryWrites=true&w=majority

# Database connection configuration
DB_MIN_POOL_SIZE=10
DB_MAX_POOL_SIZE=100
DB_CONNECTION_TIMEOUT_MS=5000
DB_SERVER_SELECTION_TIMEOUT_MS=5000
DB_MAX_IDLE_TIME_MS=0
DB_CONNECT_TIMEOUT_MS=10000

# ========================================
# REDIS CACHE
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=optional_redis_password
REDIS_URL=redis://:${REDIS_PASSWORD}@${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# Redis configuration
REDIS_MAX_CONNECTIONS=10
REDIS_CONNECTION_TIMEOUT_MS=5000
REDIS_SOCKET_KEEPALIVE=true

# ========================================
# SECURITY AND RATE LIMITING
# ========================================
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20
MAX_PROMPT_LENGTH=10000
MAX_UPLOAD_SIZE_MB=10
MAX_CONCURRENT_STREAMS=50

# Hardening Post-MVP: Document context limits (BE-PERF-1)
# Maximum number of documents to use in a single chat request
MAX_DOCS_PER_CHAT=3
# Maximum total characters from all documents combined (token cost control)
MAX_TOTAL_DOC_CHARS=16000

# CORS configuration
CORS_ORIGINS=http://localhost:3000,https://app.domain.com
ALLOWED_HOSTS=localhost,127.0.0.1,web,api

# Security headers
SECURE_HEADERS_ENABLED=true
CSRF_PROTECTION_ENABLED=true

# ========================================
# OBSERVABILITY AND MONITORING
# ========================================
LOG_LEVEL=info
LOG_FORMAT=json
DEBUG=false

# OpenTelemetry configuration
OTEL_SERVICE_NAME=copilotos-bridge
OTEL_SERVICE_VERSION=0.1.0
OTEL_ENVIRONMENT=development
OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4317
OTEL_EXPORTER_OTLP_HEADERS=
OTEL_RESOURCE_ATTRIBUTES=service.name=${OTEL_SERVICE_NAME},service.version=${OTEL_SERVICE_VERSION}

# Jaeger specific
JAEGER_ENDPOINT=http://localhost:14268/api/traces
JAEGER_AGENT_HOST=localhost
JAEGER_AGENT_PORT=6831

# Metrics
PROMETHEUS_METRICS_ENABLED=true
PROMETHEUS_METRICS_PORT=9090
METRICS_COLLECTION_INTERVAL_MS=10000

# ========================================
# DOCUMENT REVIEW SYSTEM
# ========================================
# MinIO Object Storage
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=false
MINIO_BUCKET_DOCUMENTS=documents

# LanguageTool (Grammar/Spelling Checker)
LANGUAGETOOL_URL=http://localhost:8010

# ========================================
# FEATURE FLAGS
# ========================================
# Backend feature flags
FEATURE_DEEP_RESEARCH_ENABLED=true
FEATURE_WEB_SEARCH_ENABLED=true
FEATURE_REPORT_DOWNLOAD_ENABLED=true
FEATURE_CHAT_HISTORY_ENABLED=true
FEATURE_MODEL_SELECTION_ENABLED=true
FEATURE_DOCUMENT_REVIEW_ENABLED=true
TOOL_FILES_ENABLED=true
TOOL_ADD_FILES_ENABLED=true
TOOL_DOCUMENT_REVIEW_ENABLED=true

# Frontend tool visibility (UI feature flags)
NEXT_PUBLIC_FEATURE_WEB_SEARCH=true
NEXT_PUBLIC_FEATURE_DEEP_RESEARCH=true
NEXT_PUBLIC_FEATURE_ADD_FILES=false
NEXT_PUBLIC_FEATURE_GOOGLE_DRIVE=false
NEXT_PUBLIC_FEATURE_CANVAS=false
NEXT_PUBLIC_FEATURE_AGENT_MODE=false
NEXT_PUBLIC_FEATURE_DOCUMENT_REVIEW=true
NEXT_PUBLIC_FEATURE_MIC=false
NEXT_PUBLIC_TOOL_FILES=true

# ========================================
# DEVELOPMENT TOOLS
# ========================================
# Only in development
ENABLE_DEBUG_TOOLBAR=false
ENABLE_MOCK_ALETHEIA=false
MOCK_RESPONSE_DELAY_MS=500

# API Documentation
ENABLE_API_DOCS=true
ENABLE_REDOC=true

# ========================================
# PRODUCTION OVERRIDES
# ========================================
# Uncomment and set these in production
# NODE_ENV=production
# DEBUG=false
# LOG_LEVEL=warn
# ENABLE_API_DOCS=false
# ENABLE_REDOC=false
# AUTH_JWT_SECRET=your-very-secure-secret-here
# POSTGRES_PASSWORD=your-secure-postgres-password
# REDIS_PASSWORD=your-secure-redis-password
